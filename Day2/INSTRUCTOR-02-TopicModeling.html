
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CaliDHRI Day 2: Afternoon &#8212; CaliDHRI Book</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/cropped-cropped-final_CALIDRHI_logo-1.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">CaliDHRI Book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome to the Cali-DHRI Jupyter Book
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Day 1
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Day1/01-NavigatingTheNotebook.html">
   Navigating Jupyter Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Day1/02-JupyterandPython.html">
   Week 1: Jupyter and Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Day1/03-Mapping.html">
   Visualizing Black Histories in California
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Day 2
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01-TextAnalysis.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02-TopicModeling-Participant.html">
   CaliDHRI Day 2: Afternoon
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/Day2/INSTRUCTOR-02-TopicModeling.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/benjum/ca-dhri-jupyterbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/benjum/ca-dhri-jupyterbook/issues/new?title=Issue%20on%20page%20%2FDay2/INSTRUCTOR-02-TopicModeling.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/benjum/ca-dhri-jupyterbook/master?urlpath=tree/Day2/INSTRUCTOR-02-TopicModeling.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#outline">
   Outline
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction-to-topic-modeling">
   Introduction to topic modeling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-topic-modeling-anyway">
     What is topic modeling anyway?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#uses-for-topic-modeling">
     Uses for topic modeling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#topics-are-probabilities-of-aboutness">
     Topics are probabilities of aboutness
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#research-example">
     Research example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#this-notebook">
   This notebook
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gensim">
     Gensim
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-up">
     Set up
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#understand-and-import-the-data">
   Understand and import the data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-liberator-dataset">
     The Liberator dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-our-data">
     Loading our data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-list-of-our-liberator-text">
     Create list of our Liberator text
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#call-items-in-listoflib">
     Call items in listOfLib
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-the-data">
   Prepare the data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#steps-to-take">
     Steps to take:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remove-stopwords">
     Remove stopwords
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tokenize">
     Tokenize
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lemmatize">
     Lemmatize
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-processed-text">
     The processed text
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#structure-the-data">
   Structure the data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#list-dictionary-bag">
     List –&gt; Dictionary –&gt; Bag
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#building-our-corpus">
     Building our corpus
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-the-model-and-view-topics">
   Run the model and view topics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parameters">
     Parameters
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#breakout-activity">
   Breakout activity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualize-topics">
   Visualize topics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#another-option">
     Another option?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#store-the-topics-in-a-list">
     Store the topics in a list
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#work-with-pandas-dataframes-to-develop-the-visualizations">
     Work with Pandas dataframes to develop the visualizations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modify-our-dataframes-to-create-another-visualization">
     Modify our dataframes to create another visualization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Breakout activity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wrap-up">
   Wrap-up
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>CaliDHRI Day 2: Afternoon</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#outline">
   Outline
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction-to-topic-modeling">
   Introduction to topic modeling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-topic-modeling-anyway">
     What is topic modeling anyway?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#uses-for-topic-modeling">
     Uses for topic modeling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#topics-are-probabilities-of-aboutness">
     Topics are probabilities of aboutness
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#research-example">
     Research example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#this-notebook">
   This notebook
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gensim">
     Gensim
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-up">
     Set up
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#understand-and-import-the-data">
   Understand and import the data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-liberator-dataset">
     The Liberator dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-our-data">
     Loading our data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-list-of-our-liberator-text">
     Create list of our Liberator text
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#call-items-in-listoflib">
     Call items in listOfLib
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-the-data">
   Prepare the data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#steps-to-take">
     Steps to take:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remove-stopwords">
     Remove stopwords
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tokenize">
     Tokenize
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lemmatize">
     Lemmatize
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-processed-text">
     The processed text
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#structure-the-data">
   Structure the data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#list-dictionary-bag">
     List –&gt; Dictionary –&gt; Bag
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#building-our-corpus">
     Building our corpus
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-the-model-and-view-topics">
   Run the model and view topics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parameters">
     Parameters
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#breakout-activity">
   Breakout activity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualize-topics">
   Visualize topics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#another-option">
     Another option?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#store-the-topics-in-a-list">
     Store the topics in a list
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#work-with-pandas-dataframes-to-develop-the-visualizations">
     Work with Pandas dataframes to develop the visualizations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modify-our-dataframes-to-create-another-visualization">
     Modify our dataframes to create another visualization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Breakout activity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wrap-up">
   Wrap-up
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="calidhri-day-2-afternoon">
<h1>CaliDHRI Day 2: Afternoon<a class="headerlink" href="#calidhri-day-2-afternoon" title="Permalink to this headline">¶</a></h1>
<div class="section" id="outline">
<h2>Outline<a class="headerlink" href="#outline" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Introduction to topic modeling</p></li>
<li><p>Understand and import the data</p></li>
<li><p>Prepare the data</p></li>
<li><p>Structure the data</p></li>
<li><p>Run the algorithm and see the topics</p></li>
<li><p>BREAKOUT ACTIVITY</p></li>
<li><p>Visualize the topics</p></li>
<li><p>BREAKOUT ACTIVITY</p></li>
<li><p>Daily wrap-up</p></li>
</ul>
<p><img alt="Screen%20Shot%202022-04-23%20at%207.55.35%20PM.png" src="Day2/attachment:Screen%20Shot%202022-04-23%20at%207.55.35%20PM.png" /></p>
</div>
<div class="section" id="introduction-to-topic-modeling">
<h2>Introduction to topic modeling<a class="headerlink" href="#introduction-to-topic-modeling" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-is-topic-modeling-anyway">
<h3>What is topic modeling anyway?<a class="headerlink" href="#what-is-topic-modeling-anyway" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Popular approach to “distant reading” a corpus.</p></li>
<li><p>There are different approaches</p>
<ul>
<li><p>We will be doing LDA topic modeling</p></li>
</ul>
</li>
<li><p>Unsupervised machine learning</p></li>
<li><p>Algorithm learns from the data to make guesses about “topics” in the data</p></li>
<li><p>The topics are lists of words</p></li>
</ul>
</div>
<div class="section" id="uses-for-topic-modeling">
<h3>Uses for topic modeling<a class="headerlink" href="#uses-for-topic-modeling" title="Permalink to this headline">¶</a></h3>
<p>Useful tool for understanding the subject matter of a dataset – sometimes one that is too large for close reading or as a supplement to close reading.</p>
<p>Originally created for large corpora with relatively large documents (e.g., thousands of science publications).</p>
</div>
<div class="section" id="topics-are-probabilities-of-aboutness">
<h3>Topics are probabilities of aboutness<a class="headerlink" href="#topics-are-probabilities-of-aboutness" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Basic logic: words that tend to co-occur in a corpus are likely about the same topic.</p></li>
<li><p>The corpus is divided into chunks called documents.</p></li>
<li><p>The algorithm checks each word in each document, and if they are likely to co-occur, it then groups them into topics.</p></li>
<li><p>It’s up to the human to analyze the words in the topics and make an assessment of aboutness.</p></li>
</ul>
<p><img alt="Blei_figure.png" src="Day2/attachment:Blei_figure.png" /></p>
<p><img alt="Screen%20Shot%202022-04-23%20at%207.59.55%20PM.png" src="Day2/attachment:Screen%20Shot%202022-04-23%20at%207.59.55%20PM.png" /></p>
</div>
<div class="section" id="research-example">
<h3>Research example<a class="headerlink" href="#research-example" title="Permalink to this headline">¶</a></h3>
<p>“Medicine in the Monthly Review: Revealing public medical discourse with topic modelling”</p>
<p>Whitney Arnold and Corey Arnold</p>
<p>Digital Scholarship in the Humanities</p>
<p>doi:10.1093/llc/fqab034</p>
<p><img alt="Screen%20Shot%202022-04-25%20at%201.16.45%20PM.png" src="Day2/attachment:Screen%20Shot%202022-04-25%20at%201.16.45%20PM.png" /></p>
<p><img alt="Screen%20Shot%202022-04-25%20at%201.19.25%20PM.png" src="Day2/attachment:Screen%20Shot%202022-04-25%20at%201.19.25%20PM.png" /></p>
</div>
</div>
<div class="section" id="this-notebook">
<h2>This notebook<a class="headerlink" href="#this-notebook" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gensim">
<h3>Gensim<a class="headerlink" href="#gensim" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>“Topic modeling for humans”</p></li>
<li><p>LDA topic modeling library for Python</p></li>
<li><p>Intended for large datasets</p></li>
</ul>
<p>Have you heard of other topic modeling tools or libraries?</p>
</div>
<div class="section" id="set-up">
<h3>Set up<a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h3>
<p>Libraries we need for this example:</p>
<ul class="simple">
<li><p>NLTK: data preparation</p></li>
<li><p>Gensim: topic modeling</p></li>
<li><p>Altair: visualization</p></li>
<li><p>ipywidgets: visualization</p></li>
<li><p>Matplotlib: visualization</p></li>
</ul>
<p>Already installed on JupyterHub!</p>
<p>Working locally, you’d want to make sure you installed them before trying to use them in your notebook.</p>
</div>
</div>
<div class="section" id="understand-and-import-the-data">
<h2>Understand and import the data<a class="headerlink" href="#understand-and-import-the-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-liberator-dataset">
<h3>The Liberator dataset<a class="headerlink" href="#the-liberator-dataset" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>187 files of the Liberator, where each file is an issue.</p></li>
<li><p>Files have not been cleaned.</p></li>
<li><p>Issues from 1901-1906 and 1910-1913.</p></li>
</ul>
<p>Dive deeper into the historical context of the Liberator in <a class="reference external" href="https://docs.google.com/presentation/d/1gwAISOnn3Evq_LkX_0vhsYy0iTv7s5GHLUEGVKzN-tc/edit?usp=sharing">these slides</a>.</p>
</div>
<div class="section" id="loading-our-data">
<h3>Loading our data<a class="headerlink" href="#loading-our-data" title="Permalink to this headline">¶</a></h3>
<p>Module needed:</p>
<ul class="simple">
<li><p>Glob: handy module to navigate a directory structure</p></li>
</ul>
<p>The import statements will make them available for us to use in our notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>  <span class="kn">import</span> <span class="nn">glob</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">directory_path</span> <span class="o">=</span> <span class="s1">&#39;libSeparate&#39;</span>
<span class="n">text_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">directory_path</span><span class="si">}</span><span class="s2">/*&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s check to see that the files were brought in. We can use the list index to call the first text file in text_files.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># change the number in the brackets to see a different file</span>
<span class="n">text_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;libSeparate/1912-09-20.txt&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="create-list-of-our-liberator-text">
<h3>Create list of our Liberator text<a class="headerlink" href="#create-list-of-our-liberator-text" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>Create an empty list, listOfLib</p></li>
<li><p>Use a for loop and iterate through the files in text_files</p></li>
<li><p>Open and read each, and then apending them to listOfLib</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">listOfLib</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">text_files</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">listOfLib</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s check to make sure we got all the files using len(). The length is the number of items in the list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">text_files</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>101
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">listOfLib</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>101
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="call-items-in-listoflib">
<h3>Call items in listOfLib<a class="headerlink" href="#call-items-in-listoflib" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>First brackets refer to a specific item in our list, in this case the 10th item.</p>
<ul>
<li><p>Python starts counting at 0.</p></li>
</ul>
</li>
<li><p>Second brackets are optional and restrict what is returned to a slice of the data (characters 0 to 300).</p>
<ul>
<li><p>If we didn’t slice, then we’d return the text of one entire issue of the Liberator.</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">listOfLib</span><span class="p">[</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">300</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;THE LIBERATOR \n\nA Weekly Newspaper Devoted to the Cause of Good Government and the Advancement of the American Negro. \nVol. X 5 cts. a copy LOS ANGELES, CAL., MAY 31, 1912 $1.50 a year No. 28 \n\n\n“I would take that action over again” \nRoosevelt on Brownsville \n\n\nROOSEVELT “SMOKED OUT” \nON BROWNSVILLE&#39;
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="prepare-the-data">
<h2>Prepare the data<a class="headerlink" href="#prepare-the-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="steps-to-take">
<h3>Steps to take:<a class="headerlink" href="#steps-to-take" title="Permalink to this headline">¶</a></h3>
<p>Using NLTK:</p>
<ul class="simple">
<li><p>Remove stopwords</p></li>
<li><p>Tokenization</p></li>
<li><p>Lemmatization</p></li>
</ul>
<p>First, need to import relevant NLTK modules, plus a module called punctuation that will allow us to remove punctuation from the text.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nltk</span>
<span class="kn">from</span> <span class="nn">nltk.tokenize</span> <span class="kn">import</span> <span class="n">sent_tokenize</span><span class="p">,</span> <span class="n">word_tokenize</span>
<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>
<span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">WordNetLemmatizer</span>
<span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">punctuation</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;stopwords&#39;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;punkt&#39;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;wordnet&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[nltk_data] Downloading package stopwords to
[nltk_data]     /Users/benjaminwinjum/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!
[nltk_data] Downloading package punkt to
[nltk_data]     /Users/benjaminwinjum/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package wordnet to
[nltk_data]     /Users/benjaminwinjum/nltk_data...
[nltk_data]   Package wordnet is already up-to-date!
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="remove-stopwords">
<h3>Remove stopwords<a class="headerlink" href="#remove-stopwords" title="Permalink to this headline">¶</a></h3>
<p>Let’s check out the NLTK stopword list to see what will get removed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">standardStop</span> <span class="o">=</span> <span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">standardStop</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;i&#39;, &#39;me&#39;, &#39;my&#39;, &#39;myself&#39;, &#39;we&#39;, &#39;our&#39;, &#39;ours&#39;, &#39;ourselves&#39;, &#39;you&#39;, &quot;you&#39;re&quot;, &quot;you&#39;ve&quot;, &quot;you&#39;ll&quot;, &quot;you&#39;d&quot;, &#39;your&#39;, &#39;yours&#39;, &#39;yourself&#39;, &#39;yourselves&#39;, &#39;he&#39;, &#39;him&#39;, &#39;his&#39;, &#39;himself&#39;, &#39;she&#39;, &quot;she&#39;s&quot;, &#39;her&#39;, &#39;hers&#39;, &#39;herself&#39;, &#39;it&#39;, &quot;it&#39;s&quot;, &#39;its&#39;, &#39;itself&#39;, &#39;they&#39;, &#39;them&#39;, &#39;their&#39;, &#39;theirs&#39;, &#39;themselves&#39;, &#39;what&#39;, &#39;which&#39;, &#39;who&#39;, &#39;whom&#39;, &#39;this&#39;, &#39;that&#39;, &quot;that&#39;ll&quot;, &#39;these&#39;, &#39;those&#39;, &#39;am&#39;, &#39;is&#39;, &#39;are&#39;, &#39;was&#39;, &#39;were&#39;, &#39;be&#39;, &#39;been&#39;, &#39;being&#39;, &#39;have&#39;, &#39;has&#39;, &#39;had&#39;, &#39;having&#39;, &#39;do&#39;, &#39;does&#39;, &#39;did&#39;, &#39;doing&#39;, &#39;a&#39;, &#39;an&#39;, &#39;the&#39;, &#39;and&#39;, &#39;but&#39;, &#39;if&#39;, &#39;or&#39;, &#39;because&#39;, &#39;as&#39;, &#39;until&#39;, &#39;while&#39;, &#39;of&#39;, &#39;at&#39;, &#39;by&#39;, &#39;for&#39;, &#39;with&#39;, &#39;about&#39;, &#39;against&#39;, &#39;between&#39;, &#39;into&#39;, &#39;through&#39;, &#39;during&#39;, &#39;before&#39;, &#39;after&#39;, &#39;above&#39;, &#39;below&#39;, &#39;to&#39;, &#39;from&#39;, &#39;up&#39;, &#39;down&#39;, &#39;in&#39;, &#39;out&#39;, &#39;on&#39;, &#39;off&#39;, &#39;over&#39;, &#39;under&#39;, &#39;again&#39;, &#39;further&#39;, &#39;then&#39;, &#39;once&#39;, &#39;here&#39;, &#39;there&#39;, &#39;when&#39;, &#39;where&#39;, &#39;why&#39;, &#39;how&#39;, &#39;all&#39;, &#39;any&#39;, &#39;both&#39;, &#39;each&#39;, &#39;few&#39;, &#39;more&#39;, &#39;most&#39;, &#39;other&#39;, &#39;some&#39;, &#39;such&#39;, &#39;no&#39;, &#39;nor&#39;, &#39;not&#39;, &#39;only&#39;, &#39;own&#39;, &#39;same&#39;, &#39;so&#39;, &#39;than&#39;, &#39;too&#39;, &#39;very&#39;, &#39;s&#39;, &#39;t&#39;, &#39;can&#39;, &#39;will&#39;, &#39;just&#39;, &#39;don&#39;, &quot;don&#39;t&quot;, &#39;should&#39;, &quot;should&#39;ve&quot;, &#39;now&#39;, &#39;d&#39;, &#39;ll&#39;, &#39;m&#39;, &#39;o&#39;, &#39;re&#39;, &#39;ve&#39;, &#39;y&#39;, &#39;ain&#39;, &#39;aren&#39;, &quot;aren&#39;t&quot;, &#39;couldn&#39;, &quot;couldn&#39;t&quot;, &#39;didn&#39;, &quot;didn&#39;t&quot;, &#39;doesn&#39;, &quot;doesn&#39;t&quot;, &#39;hadn&#39;, &quot;hadn&#39;t&quot;, &#39;hasn&#39;, &quot;hasn&#39;t&quot;, &#39;haven&#39;, &quot;haven&#39;t&quot;, &#39;isn&#39;, &quot;isn&#39;t&quot;, &#39;ma&#39;, &#39;mightn&#39;, &quot;mightn&#39;t&quot;, &#39;mustn&#39;, &quot;mustn&#39;t&quot;, &#39;needn&#39;, &quot;needn&#39;t&quot;, &#39;shan&#39;, &quot;shan&#39;t&quot;, &#39;shouldn&#39;, &quot;shouldn&#39;t&quot;, &#39;wasn&#39;, &quot;wasn&#39;t&quot;, &#39;weren&#39;, &quot;weren&#39;t&quot;, &#39;won&#39;, &quot;won&#39;t&quot;, &#39;wouldn&#39;, &quot;wouldn&#39;t&quot;]
</pre></div>
</div>
</div>
</div>
<p>Create custom stopword list called extraStop that we will combine with the standard list in a new list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">extraStop</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;``&#39;</span><span class="p">,</span><span class="s2">&quot;&#39;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;re&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;s&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;re&quot;</span><span class="p">,</span><span class="s1">&#39;``&#39;</span><span class="p">,</span><span class="s2">&quot;&#39;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;ll&quot;</span><span class="p">,</span><span class="s2">&quot;--&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\&#39;\&#39;</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="s2">&quot;n</span><span class="se">\&#39;</span><span class="s2">t&quot;</span><span class="p">,</span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="s1">&#39;would&#39;</span><span class="p">,</span><span class="s1">&#39;use&#39;</span><span class="p">,</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span><span class="s1">&#39;from&#39;</span><span class="p">,</span>
             <span class="s2">&quot;</span><span class="se">\&#39;</span><span class="s2">m&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\&#39;</span><span class="s2">ve&quot;</span><span class="p">,</span> <span class="s2">&quot;los&quot;</span><span class="p">,</span> <span class="s2">&quot;angeles&quot;</span><span class="p">,</span> <span class="s2">&quot;liberator&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span> <span class="s2">&quot;street&quot;</span><span class="p">,</span> <span class="s2">&quot;mrs.&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Create combined myStopWords list containing the punctuation marks, standardStop, and extraStop lists. Print the list to see it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myStopWords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">punctuation</span><span class="p">)</span> <span class="o">+</span> <span class="n">standardStop</span> <span class="o">+</span> <span class="n">extraStop</span>

<span class="nb">print</span><span class="p">(</span><span class="n">myStopWords</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;!&#39;, &#39;&quot;&#39;, &#39;#&#39;, &#39;$&#39;, &#39;%&#39;, &#39;&amp;&#39;, &quot;&#39;&quot;, &#39;(&#39;, &#39;)&#39;, &#39;*&#39;, &#39;+&#39;, &#39;,&#39;, &#39;-&#39;, &#39;.&#39;, &#39;/&#39;, &#39;:&#39;, &#39;;&#39;, &#39;&lt;&#39;, &#39;=&#39;, &#39;&gt;&#39;, &#39;?&#39;, &#39;@&#39;, &#39;[&#39;, &#39;\\&#39;, &#39;]&#39;, &#39;^&#39;, &#39;_&#39;, &#39;`&#39;, &#39;{&#39;, &#39;|&#39;, &#39;}&#39;, &#39;~&#39;, &#39;i&#39;, &#39;me&#39;, &#39;my&#39;, &#39;myself&#39;, &#39;we&#39;, &#39;our&#39;, &#39;ours&#39;, &#39;ourselves&#39;, &#39;you&#39;, &quot;you&#39;re&quot;, &quot;you&#39;ve&quot;, &quot;you&#39;ll&quot;, &quot;you&#39;d&quot;, &#39;your&#39;, &#39;yours&#39;, &#39;yourself&#39;, &#39;yourselves&#39;, &#39;he&#39;, &#39;him&#39;, &#39;his&#39;, &#39;himself&#39;, &#39;she&#39;, &quot;she&#39;s&quot;, &#39;her&#39;, &#39;hers&#39;, &#39;herself&#39;, &#39;it&#39;, &quot;it&#39;s&quot;, &#39;its&#39;, &#39;itself&#39;, &#39;they&#39;, &#39;them&#39;, &#39;their&#39;, &#39;theirs&#39;, &#39;themselves&#39;, &#39;what&#39;, &#39;which&#39;, &#39;who&#39;, &#39;whom&#39;, &#39;this&#39;, &#39;that&#39;, &quot;that&#39;ll&quot;, &#39;these&#39;, &#39;those&#39;, &#39;am&#39;, &#39;is&#39;, &#39;are&#39;, &#39;was&#39;, &#39;were&#39;, &#39;be&#39;, &#39;been&#39;, &#39;being&#39;, &#39;have&#39;, &#39;has&#39;, &#39;had&#39;, &#39;having&#39;, &#39;do&#39;, &#39;does&#39;, &#39;did&#39;, &#39;doing&#39;, &#39;a&#39;, &#39;an&#39;, &#39;the&#39;, &#39;and&#39;, &#39;but&#39;, &#39;if&#39;, &#39;or&#39;, &#39;because&#39;, &#39;as&#39;, &#39;until&#39;, &#39;while&#39;, &#39;of&#39;, &#39;at&#39;, &#39;by&#39;, &#39;for&#39;, &#39;with&#39;, &#39;about&#39;, &#39;against&#39;, &#39;between&#39;, &#39;into&#39;, &#39;through&#39;, &#39;during&#39;, &#39;before&#39;, &#39;after&#39;, &#39;above&#39;, &#39;below&#39;, &#39;to&#39;, &#39;from&#39;, &#39;up&#39;, &#39;down&#39;, &#39;in&#39;, &#39;out&#39;, &#39;on&#39;, &#39;off&#39;, &#39;over&#39;, &#39;under&#39;, &#39;again&#39;, &#39;further&#39;, &#39;then&#39;, &#39;once&#39;, &#39;here&#39;, &#39;there&#39;, &#39;when&#39;, &#39;where&#39;, &#39;why&#39;, &#39;how&#39;, &#39;all&#39;, &#39;any&#39;, &#39;both&#39;, &#39;each&#39;, &#39;few&#39;, &#39;more&#39;, &#39;most&#39;, &#39;other&#39;, &#39;some&#39;, &#39;such&#39;, &#39;no&#39;, &#39;nor&#39;, &#39;not&#39;, &#39;only&#39;, &#39;own&#39;, &#39;same&#39;, &#39;so&#39;, &#39;than&#39;, &#39;too&#39;, &#39;very&#39;, &#39;s&#39;, &#39;t&#39;, &#39;can&#39;, &#39;will&#39;, &#39;just&#39;, &#39;don&#39;, &quot;don&#39;t&quot;, &#39;should&#39;, &quot;should&#39;ve&quot;, &#39;now&#39;, &#39;d&#39;, &#39;ll&#39;, &#39;m&#39;, &#39;o&#39;, &#39;re&#39;, &#39;ve&#39;, &#39;y&#39;, &#39;ain&#39;, &#39;aren&#39;, &quot;aren&#39;t&quot;, &#39;couldn&#39;, &quot;couldn&#39;t&quot;, &#39;didn&#39;, &quot;didn&#39;t&quot;, &#39;doesn&#39;, &quot;doesn&#39;t&quot;, &#39;hadn&#39;, &quot;hadn&#39;t&quot;, &#39;hasn&#39;, &quot;hasn&#39;t&quot;, &#39;haven&#39;, &quot;haven&#39;t&quot;, &#39;isn&#39;, &quot;isn&#39;t&quot;, &#39;ma&#39;, &#39;mightn&#39;, &quot;mightn&#39;t&quot;, &#39;mustn&#39;, &quot;mustn&#39;t&quot;, &#39;needn&#39;, &quot;needn&#39;t&quot;, &#39;shan&#39;, &quot;shan&#39;t&quot;, &#39;shouldn&#39;, &quot;shouldn&#39;t&quot;, &#39;wasn&#39;, &quot;wasn&#39;t&quot;, &#39;weren&#39;, &quot;weren&#39;t&quot;, &#39;won&#39;, &quot;won&#39;t&quot;, &#39;wouldn&#39;, &quot;wouldn&#39;t&quot;, &#39;``&#39;, &quot;&#39;&#39;&quot;, &quot;&#39;re&quot;, &quot;&#39;s&quot;, &quot;&#39;re&quot;, &#39;``&#39;, &quot;&#39;&#39;&quot;, &quot;&#39;ll&quot;, &#39;--&#39;, &quot;&#39;&#39;&quot;, &#39;...&#39;, &quot;n&#39;t&quot;, &#39;one&#39;, &#39;would&#39;, &#39;use&#39;, &#39;subject&#39;, &#39;from&#39;, &quot;&#39;m&quot;, &quot;&#39;ve&quot;, &#39;los&#39;, &#39;angeles&#39;, &#39;liberator&#39;, &#39;phone&#39;, &#39;street&#39;, &#39;mrs.&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="tokenize">
<h3>Tokenize<a class="headerlink" href="#tokenize" title="Permalink to this headline">¶</a></h3>
<p>We’re going to iterate through the words in the issues of the Liberator, lowercase them, tokenize them, and add them to a list called allLibWords, which will be a list of lists of words in each issue.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">listOfLibWords</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">allLibWords</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listOfLib</span><span class="p">:</span>
    <span class="n">processedText</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">myStopWords</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">listOfLibWords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">processedText</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">processedText</span><span class="p">:</span>
        <span class="n">allLibWords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="lemmatize">
<h3>Lemmatize<a class="headerlink" href="#lemmatize" title="Permalink to this headline">¶</a></h3>
<p>We will iterate through the tokens in listOfLibWords, lemmatize them, and add them to listofLemWords.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">listOfLemWords</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">wordnet_lemmatizer</span> <span class="o">=</span> <span class="n">WordNetLemmatizer</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listOfLibWords</span><span class="p">:</span>
    <span class="n">listOfLemWords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">wordnet_lemmatizer</span><span class="o">.</span><span class="n">lemmatize</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-processed-text">
<h3>The processed text<a class="headerlink" href="#the-processed-text" title="Permalink to this headline">¶</a></h3>
<p>Let’s take a look at a slice of tokens from list item 6.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">listOfLemWords</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">25</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;-devoted&#39;,
 &#39;good&#39;,
 &#39;government&#39;,
 &#39;advanement&#39;,
 &#39;afro-&#39;,
 &#39;america&#39;,
 &#39;__los&#39;,
 &#39;cal.&#39;,
 &#39;august&#39;,
 &#39;spring&#39;,
 &#39;suit&#39;,
 &#39;ready&#39;,
 &#39;mensel&#39;,
 &#39;^eased&#39;,
 &#39;style&#39;,
 &#39;fine&#39;,
 &#39;appearance&#39;,
 &#39;spnn&#39;,
 &#39;slut&#39;,
 &#39;want&#39;,
 &#39;come&#39;,
 &#39;whether&#39;,
 &#39;ready&#39;,
 &#39;make&#39;,
 &#39;purchase&#39;]
</pre></div>
</div>
</div>
</div>
<p>What other steps might we have wanted to take to prepare our data?</p>
</div>
</div>
<div class="section" id="structure-the-data">
<h2>Structure the data<a class="headerlink" href="#structure-the-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="list-dictionary-bag">
<h3>List –&gt; Dictionary –&gt; Bag<a class="headerlink" href="#list-dictionary-bag" title="Permalink to this headline">¶</a></h3>
<p>Gensim expects the data in a certain format.</p>
<p>First, we need to build a Gensim corpus (dictionary) from our list. Then we need to translate the dictionary into a bag-of-words.</p>
<p><img alt="Screen%20Shot%202022-04-24%20at%206.19.12%20AM.png" src="Day2/attachment:Screen%20Shot%202022-04-24%20at%206.19.12%20AM.png" /></p>
<p>But before any of that, we need to import Gensim and the corpora and models modules.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gensim</span>
<span class="kn">from</span> <span class="nn">gensim</span> <span class="kn">import</span> <span class="n">corpora</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="nn">Input In [16],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">gensim</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">gensim</span> <span class="kn">import</span> <span class="n">corpora</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;gensim&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="building-our-corpus">
<h3>Building our corpus<a class="headerlink" href="#building-our-corpus" title="Permalink to this headline">¶</a></h3>
<p>First, define a variable called dictionary.</p>
<p>Gensim’s corpora module will map the words in each document to integer IDs (i.e., assigning each unique word in the corpus a corresponding number).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dictionary</span> <span class="o">=</span> <span class="n">corpora</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">listOfLemWords</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<p>We can check the ID of any token an our corpus.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#try looking up another word to find its ID</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">token2id</span><span class="p">[</span><span class="s1">&#39;help&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Then define a new variable called corpus using Gensim’s doc2bow.</p>
<p>The BOW will be a list of tuples – consisting of word ID and frequency pairs – that represent each document in our corpus.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">corpus</span> <span class="o">=</span> <span class="p">[</span><span class="n">dictionary</span><span class="o">.</span><span class="n">doc2bow</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">listOfLemWords</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s take a look at our corpus.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">corpus</span><span class="p">[</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">300</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="run-the-model-and-view-topics">
<h2>Run the model and view topics<a class="headerlink" href="#run-the-model-and-view-topics" title="Permalink to this headline">¶</a></h2>
<p>Gensim has a module called models for LDA topic modeling. We’ll import the models module and then create our topics.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gensim</span> <span class="kn">import</span> <span class="n">models</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<p>There are parameters that we have the option to set when creating the topic model. We’re using just couple here:</p>
<ul class="simple">
<li><p>num_topics: the number of topics our model will create. This is a parameter you can adjust based on your corpus size and the length of the documents.</p></li>
<li><p>passes: the number of times the algorithm will pass through the documents. A higher number is likely to yield higher quality topics, but will take more time to run.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lda_model</span> <span class="o">=</span> <span class="n">gensim</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ldamodel</span><span class="o">.</span><span class="n">LdaModel</span><span class="p">(</span><span class="n">corpus</span><span class="p">,</span> 
                                           <span class="n">num_topics</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> 
                                           <span class="n">id2word</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">,</span> 
                                           <span class="n">passes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The notation show_topics() will return the 10 most salient words in each of our topics.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lda_model</span><span class="o">.</span><span class="n">show_topics</span><span class="p">()</span>
<span class="c1">#try adding a topic number (e.g., 5) and topn= 20 to see twenty words in topic 5, for example show_topic(9, topn=20)</span>
</pre></div>
</div>
</div>
</div>
<p>This slightly more complicated code will print a cleaner list of our topics</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Topic &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">lda_model</span><span class="o">.</span><span class="n">show_topic</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">topn</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="breakout-activity">
<h2>Breakout activity<a class="headerlink" href="#breakout-activity" title="Permalink to this headline">¶</a></h2>
<p>Play with the parameters and stopwords.</p>
<ul class="simple">
<li><p>Adjust the parameters (number of topics and passes, or add more parameters from those available: <a class="reference external" href="https://radimrehurek.com/gensim/models/word2vec.html">https://radimrehurek.com/gensim/models/word2vec.html</a>)</p></li>
<li><p>Modify the stopword list</p></li>
</ul>
<p>Then rerun your code.</p>
</div>
<div class="section" id="visualize-topics">
<h2>Visualize topics<a class="headerlink" href="#visualize-topics" title="Permalink to this headline">¶</a></h2>
<p>Visualizing our topics will help us make sense of them. The code blocks in this section are a bit more complicated than what we saw above.</p>
<p>First, let’s import the modules we need:</p>
<ul class="simple">
<li><p>Altair: visualization library for Python</p></li>
<li><p>ipywidgets: will make our visualizations interactive</p></li>
<li><p>Pandas: common Python library for data science that is useful when working with tabular data</p></li>
<li><p>Matplotlib: a very popular Python visualization library</p></li>
<li><p>Seaborn: another Python visualization library</p></li>
</ul>
<p>Where you see the statements written “import ______ as ____”, that’s a way to abbreviate a module’s name, mostly for the convenience of not typing the full name later. The abbreviations used here are common, so you may seem them if you look at other’s code in the future.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="another-option">
<h3>Another option?<a class="headerlink" href="#another-option" title="Permalink to this headline">¶</a></h3>
<p>pyLDAvis is another frequently used Python library for visualizing the outputs of Gensim topic models. The code is a bit simpler than what we’re using here, but we think these custom visualizations are nicer! If you wanted to use pyLDAvis, you’d need to run:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#import pyLDAvis</span>
<span class="c1">#import pyLDAvis.gensim_models</span>
<span class="c1">#pyLDAvis.enable_notebook()</span>
<span class="c1">#vis = pyLDAvis.gensim_models.prepare(ldamodel, corpus, id2word, mds=&quot;mmds&quot;, R=30)</span>
<span class="c1">#vis</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="store-the-topics-in-a-list">
<h3>Store the topics in a list<a class="headerlink" href="#store-the-topics-in-a-list" title="Permalink to this headline">¶</a></h3>
<p>To go from the topics we produced into our visualizations, we need to prep our output data. First, we’ll create a list of topic words.</p>
<p>Our code will:</p>
<ul class="simple">
<li><p>Create a variable called topics and set it to show_topics</p></li>
<li><p>Create an empty list called topic_words</p></li>
<li><p>Iterate through topics and append the tokens to the topic_words list</p></li>
</ul>
<p>At the end, we print topic_words</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topics</span><span class="o">=</span><span class="n">lda_model</span><span class="o">.</span><span class="n">show_topics</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span><span class="n">formatted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">topic_words</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
    <span class="n">topic_words</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">wd</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">wd</span> <span class="ow">in</span> <span class="n">topic</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">topic_words</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="work-with-pandas-dataframes-to-develop-the-visualizations">
<h3>Work with Pandas dataframes to develop the visualizations<a class="headerlink" href="#work-with-pandas-dataframes-to-develop-the-visualizations" title="Permalink to this headline">¶</a></h3>
<p>Pandas? Dataframes? The important thing to know is that we are creating a dataframe, which you can think about like superpowered, code-accessible spreadsheet.</p>
<p><img alt="Screen%20Shot%202022-04-24%20at%202.58.41%20PM.png" src="Day2/attachment:Screen%20Shot%202022-04-24%20at%202.58.41%20PM.png" /></p>
<p>The code to create the dataframe includes Pandas syntax that will be unfamiliar! Just try to get a feel for what it’s doing. Our dataframe will include the probability for each topic in each file in our corpus.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ntopics</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">dftopics</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;corpus&#39;</span><span class="p">:</span><span class="n">corpus</span><span class="p">})</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">topiclist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">topicprob</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">topiccorpus</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">dftopics</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">probs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">ntopics</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">lda_model</span><span class="o">.</span><span class="n">get_document_topics</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;corpus&#39;</span><span class="p">]):</span>
        <span class="n">probs</span><span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntopics</span><span class="p">):</span>
        <span class="n">topiccorpus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">topiclist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="n">topicprob</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">probs</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
<span class="n">topic_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;corpus&#39;</span><span class="p">:</span><span class="n">topiccorpus</span><span class="p">,</span><span class="s1">&#39;topic&#39;</span><span class="p">:</span><span class="n">topiclist</span><span class="p">,</span><span class="s1">&#39;prob&#39;</span><span class="p">:</span><span class="n">topicprob</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>If we call the dataframe, then we can get a feel for the tabular format.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_dataframe</span>
</pre></div>
</div>
</div>
</div>
<p>Then we can sort our dataframe to be ascending by topic.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_dataframe</span> <span class="o">=</span> <span class="n">topic_dataframe</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">,</span><span class="s1">&#39;prob&#39;</span><span class="p">],</span><span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Here’s another big code block! Again, let’s just try to get a feel for what’s happening.</p>
<p>We’re creating an interactive visualization that shows the dispersion of topics within our issues of the Liberator.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ntopics</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">numwords</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">selection</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection_single</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">],</span> <span class="n">bind</span><span class="o">=</span><span class="s1">&#39;legend&#39;</span><span class="p">)</span>
<span class="n">selopac</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection_single</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">],</span><span class="n">bind</span><span class="o">=</span><span class="s1">&#39;legend&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">topicbars</span><span class="p">(</span><span class="n">Topic</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">Topic</span>
    <span class="n">topics_df_sorted</span> <span class="o">=</span> <span class="n">topic_dataframe</span><span class="p">[</span><span class="n">topic_dataframe</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">,</span><span class="s1">&#39;prob&#39;</span><span class="p">],</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">topics_df_sorted</span> <span class="o">=</span> <span class="n">topics_df_sorted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">topic_dataframe</span><span class="p">[</span><span class="n">topic_dataframe</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">]</span><span class="o">!=</span><span class="n">a</span><span class="p">])</span>

    <span class="n">x</span><span class="o">=</span><span class="n">lda_model</span><span class="o">.</span><span class="n">show_topics</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="n">ntopics</span><span class="p">,</span> <span class="n">num_words</span><span class="o">=</span><span class="n">numwords</span><span class="p">,</span><span class="n">formatted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">topic_words</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
        <span class="n">topic_words</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">wd</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">wd</span> <span class="ow">in</span> <span class="n">topic</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
    <span class="n">topics_df_sorted</span><span class="p">[</span><span class="s1">&#39;topicwords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">topics_df_sorted</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">topics_df_sorted</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;topicwords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topic_words</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">]])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topic_words</span><span class="p">[</span><span class="n">Topic</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">topics_df_sorted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;sum(prob)&#39;</span><span class="p">,</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;corpus&#39;</span><span class="p">,</span><span class="n">sort</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;topic:N&#39;</span><span class="p">),</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span><span class="s1">&#39;corpus&#39;</span><span class="p">),</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">selopac</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;corpus&#39;</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39;prob&#39;</span><span class="p">,</span> <span class="s1">&#39;topicwords&#39;</span><span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span><span class="n">selopac</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">chart</span>

<span class="n">ipywidgets</span><span class="o">.</span><span class="n">interact</span><span class="p">(</span><span class="n">topicbars</span><span class="p">,</span><span class="n">Topic</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="n">ntopics</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="modify-our-dataframes-to-create-another-visualization">
<h3>Modify our dataframes to create another visualization<a class="headerlink" href="#modify-our-dataframes-to-create-another-visualization" title="Permalink to this headline">¶</a></h3>
<p>Another view of the topics would be to show how prevalent each topic is within each file.</p>
<p>To start, we can modify our dataframe so that topic is now rendered as a column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_dataframe</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;corpus&#39;</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;topic&#39;</span><span class="p">,</span><span class="n">values</span><span class="o">=</span><span class="s1">&#39;prob&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s integrate that code into the code below to create a new dataframe where the words in each topic will now be brought in, instead of the topic number. Then we’ll call the new dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ntopics</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">numwords</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">df_topic_words</span> <span class="o">=</span> <span class="n">topic_dataframe</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;corpus&#39;</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;topic&#39;</span><span class="p">,</span><span class="n">values</span><span class="o">=</span><span class="s1">&#39;prob&#39;</span><span class="p">)</span>

<span class="n">x</span><span class="o">=</span><span class="n">lda_model</span><span class="o">.</span><span class="n">show_topics</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="n">ntopics</span><span class="p">,</span> <span class="n">num_words</span><span class="o">=</span><span class="n">numwords</span><span class="p">,</span><span class="n">formatted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">topic_words</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">topic_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">wd</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">wd</span> <span class="ow">in</span> <span class="n">topic</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
<span class="n">df_topic_words</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">topic_words</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_topic_words</span>
</pre></div>
</div>
</div>
</div>
<p>Finally, we can create our visualization of the df_topic_words.</p>
<p>What is legible to you in the code that does this? What sense can we make?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">80</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df_topic_words</span><span class="p">,</span>
                 <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;YlGnBu&quot;</span><span class="p">,</span>
                 <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>Breakout activity<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Comparing the visualizations they created with topic modeling to visualizations from day 1. Think about the methods we’ve discussed. When might you use one or another?</p>
</div>
<div class="section" id="wrap-up">
<h2>Wrap-up<a class="headerlink" href="#wrap-up" title="Permalink to this headline">¶</a></h2>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Day2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By CaliDHRI<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>